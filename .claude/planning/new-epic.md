# Create New Epic Spec

You are helping the user scaffold a new epic specification within the hierarchical planning system.

## Your Task

Create a complete epic specification with:
1. Epic directory structure
2. EPIC.md (from template)
3. PROGRESS.md (initialized empty)
4. features/ subdirectory
5. Update parent MILESTONE.md to list the new epic
6. Update specs/PROJECT_ROADMAP.md if needed

## Interactive Prompts

Ask the user these questions (use AskUserQuestion tool):

1. **Epic Name** (header: "Epic Name")
   - Question: "What is the epic name? (use uppercase with underscores, e.g., 'E1_CORE_VALIDATION')"
   - Options:
     - label: "E1_CORE_VALIDATION", description: "Core validation pipeline"
     - label: "E2_METADATA_LINEAGE", description: "Metadata and lineage tracking"
     - label: "E3_RBAC_GDPR", description: "Security and compliance"
     - label: "E4_SCALE_OPERATIONS", description: "Scale and operations"
     - (User can select "Other" to provide custom name)

2. **Milestone** (header: "Milestone")
   - Question: "Which milestone does this epic belong to?"
   - Options:
     - label: "M1_MVP_FOUNDATION", description: "MVP Foundation (Target: 2025-12-30)"
     - label: "M2_SECURITY_COMPLIANCE", description: "Security & Compliance (Target: 2026-01-31)"
     - label: "M3_SCALE_OPERATIONS", description: "Scale & Operations (Target: 2026-02-28)"

3. **Description** (header: "Description")
   - Question: "What is the epic description? (2-3 sentences describing the initiative)"
   - Options:
     - label: "Build core validation pipeline with cleansing, profiling, and rule evaluation", description: "Validation pipeline"
     - label: "Implement metadata registry with lineage tracking and audit trail", description: "Metadata system"
     - label: "Add Azure AD authentication, RBAC, and GDPR compliance", description: "Security features"
     - (User can select "Other" to provide custom description)

4. **Estimated Features** (header: "Features")
   - Question: "How many features do you estimate this epic will have?"
   - Options:
     - label: "2-3", description: "Small epic (1-2 weeks)"
     - label: "4-6", description: "Medium epic (3-4 weeks)"
     - label: "7+", description: "Large epic (5+ weeks)"

## Implementation Steps

After gathering user input:

### Step 1: Determine Paths

Based on the selected milestone, find the milestone directory:
- Example: `specs/milestones/M1_MVP_FOUNDATION/`

### Step 2: Create Epic Directory

```bash
mkdir -p specs/milestones/{MILESTONE}/epics/{EPIC_NAME}/features
```

### Step 3: Generate EPIC.md

Use this template:

```markdown
# Epic: {EPIC_DISPLAY_NAME}

**Epic ID:** {EPIC_NAME}
**Milestone:** {MILESTONE}
**Status:** Not Started
**Progress:** 0%

## Overview

{DESCRIPTION}

This epic is a major initiative within {MILESTONE_DISPLAY_NAME} that delivers critical functionality for the platform.

## Goals

1. [Goal 1 - auto-generate based on epic type]
2. [Goal 2]
3. [Goal 3]

## Scope

**In scope:**
- [Feature area 1]
- [Feature area 2]
- [Feature area 3]

**Out of scope:**
- [What's NOT included - helps prevent scope creep]

## Features

*Features will be listed here as they are created using /planning/new-feature*

## Architecture Context

This epic implements components described in:

- **Primary:** docs/ARCHITECTURE.md
- **Contracts:** docs/CONTRACT_DRIVEN_ARCHITECTURE.md
- **Related Docs:** [list relevant docs]

**Modules affected:**
- [Module 1]
- [Module 2]

## Dependencies

**Requires:**
- [Previous epic or milestone, if any]

**Blocks:**
- [What depends on this epic completing]

## Success Criteria

- [ ] All features in this epic completed
- [ ] Integration tests pass
- [ ] Documentation updated
- [ ] Code reviewed and merged

## Timeline

**Estimated Duration:** {ESTIMATE} weeks
**Target Completion:** [Date based on milestone]

## Notes

Add epic-level notes here as work progresses.
```

### Step 4: Initialize PROGRESS.md

Create empty progress file:

```markdown
# {EPIC_DISPLAY_NAME} - Progress Tracking

**Last Updated:** {TODAY}

## Features Progress

*This file is auto-generated by the checkpoint system*
*Run `/planning/progress` to update*

---

## Summary

- **Total Features:** 0
- **Completed:** 0
- **In Progress:** 0
- **Not Started:** 0

---

## Feature Breakdown

*No features created yet. Use `/planning/new-feature` to add features to this epic.*
```

### Step 5: Update Parent MILESTONE.md

Read the parent MILESTONE.md file and add this epic to the Epics section:

```markdown
### {EPIC_NAME}: {EPIC_DISPLAY_NAME} - 0%
{DESCRIPTION}

**Features:** 0 (to be added)
**Status:** Not Started
```

### Step 6: Update PROJECT_ROADMAP.md

If this is a new epic in an existing milestone, update the epic count in PROJECT_ROADMAP.md.

### Step 7: Confirm Creation

Display a success message:

```
âœ… Epic specification created successfully!

**Location:** specs/milestones/{MILESTONE}/epics/{EPIC_NAME}/

**Files created:**
- EPIC.md
- PROGRESS.md
- features/ (directory)

**Next steps:**
1. Review and customize EPIC.md
2. Add features: /planning/new-feature
3. Track progress: /planning/progress

**Quick commands:**
- Add feature: /planning/new-feature
- View progress: /planning/progress
```

## Important Notes

- Epic names should use UPPERCASE with underscores and start with E# prefix (e.g., E1_CORE_VALIDATION)
- Epics group related features into a cohesive initiative
- PROGRESS.md is auto-generated - don't edit manually
- Always update parent MILESTONE.md
- Epic IDs should be sequential within a milestone (E1, E2, E3...)
