# Create New Milestone Spec

You are helping the user scaffold a new milestone specification within the hierarchical planning system.

## Your Task

Create a complete milestone specification with:
1. Milestone directory structure
2. MILESTONE.md (from template)
3. PROGRESS.md (initialized empty)
4. epics/ subdirectory
5. Update specs/PROJECT_ROADMAP.md to list the new milestone

## Interactive Prompts

Ask the user these questions (use AskUserQuestion tool):

1. **Milestone Name** (header: "Milestone")
   - Question: "What is the milestone name? (use uppercase with underscores, e.g., 'M1_MVP_FOUNDATION')"
   - Options:
     - label: "M1_MVP_FOUNDATION", description: "MVP Foundation - core platform"
     - label: "M2_SECURITY_COMPLIANCE", description: "Security and compliance features"
     - label: "M3_SCALE_OPERATIONS", description: "Scale and operational excellence"
     - label: "M4_ADVANCED_ANALYTICS", description: "Advanced analytics and reporting"
     - (User can select "Other" to provide custom name)

2. **Description** (header: "Description")
   - Question: "What is the milestone description? (2-3 sentences describing the phase)"
   - Options:
     - label: "Core validation pipeline with cleansing, profiling, and validation", description: "MVP features"
     - label: "Azure AD, RBAC, GDPR compliance, and audit trail", description: "Security features"
     - label: "Performance optimization, blob storage, and orchestration", description: "Scale features"
     - (User can select "Other" to provide custom description)

3. **Target Date** (header: "Target")
   - Question: "What is the target completion date for this milestone?"
   - Options:
     - label: "2025-12-30", description: "End of December 2025"
     - label: "2026-01-31", description: "End of January 2026"
     - label: "2026-02-28", description: "End of February 2026"
     - label: "2026-03-31", description: "End of March 2026"

4. **Estimated Epics** (header: "Epics")
   - Question: "How many epics do you estimate this milestone will have?"
   - Options:
     - label: "1-2", description: "Small milestone (1 month)"
     - label: "3-4", description: "Medium milestone (2 months)"
     - label: "5+", description: "Large milestone (3+ months)"

## Implementation Steps

After gathering user input:

### Step 1: Create Milestone Directory

```bash
mkdir -p specs/milestones/{MILESTONE_NAME}/epics
```

### Step 2: Generate MILESTONE.md

Use this template:

```markdown
# Milestone: {MILESTONE_DISPLAY_NAME}

**Milestone ID:** {MILESTONE_NAME}
**Status:** Not Started
**Progress:** 0%
**Target:** {TARGET_DATE}

## Overview

{DESCRIPTION}

This milestone represents a major phase in the platform's development, delivering cohesive functionality that moves the project toward production readiness.

## Goals

1. [Goal 1 - auto-generate based on milestone type]
2. [Goal 2]
3. [Goal 3]
4. [Goal 4]

## Success Criteria

- [ ] All epics in this milestone completed
- [ ] Integration tests pass across all features
- [ ] Documentation updated and reviewed
- [ ] Code reviewed and merged to main
- [ ] Demo prepared for stakeholders

## Epics

*Epics will be listed here as they are created using /planning-new-epic*

## Dependencies

**Requires:** [Previous milestone, if any]

**Blocks:** [Next milestone]

**External Dependencies:**
- [Any external dependencies like Azure resources, third-party services, etc.]

## Timeline

**Target Completion:** {TARGET_DATE}
**Estimated Duration:** {ESTIMATE} months
**Start Date:** [Calculate based on dependencies]

## Architecture Context

This milestone implements components described in:

- **Primary:** docs/ARCHITECTURE.md
- **BRD:** docs/BRD.md
- **Security:** docs/SECURITY_GUIDE.md (if security-related)
- **Metadata:** docs/METADATA_LAYER_SPEC.md (if metadata-related)

**Major modules affected:**
- [Module 1]
- [Module 2]
- [Module 3]

## Risk Management

**Key Risks:**
1. [Risk 1] - Mitigation: [strategy]
2. [Risk 2] - Mitigation: [strategy]

## Notes

Add milestone-level notes here as work progresses.
```

### Step 3: Initialize PROGRESS.md

Create empty progress file:

```markdown
# {MILESTONE_DISPLAY_NAME} - Progress Tracking

**Last Updated:** {TODAY}

## Milestone Progress

**Status:** Not Started
**Progress:** 0%
**Target:** {TARGET_DATE}

---

## Epics Progress

*This file is auto-generated by the checkpoint system*
*Run `/planning-progress` to update*

---

## Summary

- **Total Epics:** 0
- **Total Features:** 0
- **Completed Features:** 0
- **In Progress Features:** 0
- **Not Started Features:** 0

---

## Epic Breakdown

*No epics created yet. Use `/planning-new-epic` to add epics to this milestone.*
```

### Step 4: Update PROJECT_ROADMAP.md

Read PROJECT_ROADMAP.md and add this milestone to the Milestones section:

```markdown
### {MILESTONE_NAME}: {MILESTONE_DISPLAY_NAME} [Not Started] - 0%
**Target:** {TARGET_DATE}
**Status:** Not Started

{DESCRIPTION}

**Epics:**
- (To be added via /planning-new-epic)

**Dependencies:** [List]
**Blockers:** [None]
```

### Step 5: Calculate Overall Project Progress

After adding the milestone:
1. Count total milestones
2. Count completed milestones
3. Update overall progress percentage in PROJECT_ROADMAP.md

### Step 6: Confirm Creation

Display a success message:

```
âœ… Milestone specification created successfully!

**Location:** specs/milestones/{MILESTONE_NAME}/

**Files created:**
- MILESTONE.md
- PROGRESS.md
- epics/ (directory)

**Next steps:**
1. Review and customize MILESTONE.md
2. Add epics: /planning-new-epic
3. Track progress: /planning-progress

**Timeline:**
- Target completion: {TARGET_DATE}
- Estimated duration: {ESTIMATE}

**Quick commands:**
- Add epic: /planning-new-epic
- View progress: /planning-progress
- View roadmap: cat specs/PROJECT_ROADMAP.md
```

## Important Notes

- Milestone names should use UPPERCASE with underscores and start with M# prefix (e.g., M1_MVP_FOUNDATION)
- Milestones represent major phases (typically 1-3 months of work)
- PROGRESS.md is auto-generated - don't edit manually
- Always update PROJECT_ROADMAP.md
- Milestone IDs should be sequential (M1, M2, M3...)
- Target dates should be realistic and account for dependencies
- Consider dependencies between milestones (M2 depends on M1, etc.)
